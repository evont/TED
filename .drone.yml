---
kind: pipeline
type: docker
name: default

workspace:
  base: /root/drone
  path: /src

steps:
- name: egg-build
  image: node
  volumes:
  - name: prod
    path: /root/drone/src
  commands:
    - pwd
    - npm i --production --registry=https://registry.npm.taobao.org
    - ls

trigger:
  branch:
  - master
  event:
  - push

volumes:
- name: prod
  host:
    path: /root/drone/src